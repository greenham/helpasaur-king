services:
  mongo:
    volumes:
      - ./docker-entrypoint-initdb.d/db-init.prod.js:/docker-entrypoint-initdb.d/db-init.prod.js:ro

  nginx:
    ports:
      - 80:80
      - 443:443
    volumes:
      - /etc/letsencrypt/live/helpasaur.com/fullchain.pem:/etc/nginx/certs/helpasaur.com/fullchain.pem
      - /etc/letsencrypt/live/helpasaur.com/privkey.pem:/etc/nginx/certs/helpasaur.com/privkey.pem
      - /etc/letsencrypt/live/api.helpasaur.com/fullchain.pem:/etc/nginx/certs/api.helpasaur.com/fullchain.pem
      - /etc/letsencrypt/live/api.helpasaur.com/privkey.pem:/etc/nginx/certs/api.helpasaur.com/privkey.pem
      - /etc/letsencrypt/live/rw.helpasaur.com/fullchain.pem:/etc/nginx/certs/rw.helpasaur.com/fullchain.pem
      - /etc/letsencrypt/live/rw.helpasaur.com/privkey.pem:/etc/nginx/certs/rw.helpasaur.com/privkey.pem
      - ./nginx/ssl:/etc/nginx/ssl
      - ./nginx/nginx.prod.conf:/etc/nginx/conf.d/default.conf

  api-server:
    image: helpasaur-king-api:prod

  discord-bot:
    image: helpasaur-king-discord:prod

  twitch-bot:
    image: helpasaur-king-twitch:prod

  web-public:
    image: helpasaur-king-web:prod

  runnerwatcher:
    image: helpasaur-king-runnerwatcher:prod

  racebot:
    image: helpasaur-king-racebot:prod

  ws-relay:
    image: helpasaur-king-ws-relay:prod
    networks:
      - int
